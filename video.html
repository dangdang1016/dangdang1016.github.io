<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨è¦–å£å½±ç‰‡æ’­æ”¾å™¨ (å«è§£æåº¦èª¿æ•´)</title>
    <style>
        /* 1. é‡ç½® Body æ¨£å¼ä»¥å¡«æ»¿æ•´å€‹è¦–å£ */
        body {
            margin: 0; 
            overflow: hidden; 
            height: 100vh; 
            width: 100vw; 
        }

        /* 2. æ’­æ”¾å™¨å®¹å™¨æ¨£å¼ï¼šèˆ‡è¦–å£åŒå¤§ */
        .video-player {
            width: 100vw; 
            height: 100vh; 
            margin: 0;
            background-color: #000;
            position: relative; 
            display: flex; 
            justify-content: center;
            align-items: center;
        }

        /* 3. å½±ç‰‡å…ƒç´ æœ¬èº«ï¼šä½¿ç”¨ object-fit ç¢ºä¿å¡«æ»¿ç•«é¢ */
        #myVideo {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover; /* å¡«æ»¿å®¹å™¨ï¼Œä¿æŒæ¯”ä¾‹ä¸¦è£å‰ª */
        }

        /* 4. æ§åˆ¶æ¬„æ¨£å¼ */
        .controls {
            display: flex;
            align-items: center;
            padding: 8px 15px; 
            background: rgba(0, 0, 0, 0.7); 
            color: #fff;
            position: fixed; 
            bottom: 0;
            left: 0;
            width: 100%;
            box-sizing: border-box; 
            z-index: 10; 
            opacity: 1; 
            transition: opacity 0.3s;
        }

        /* 5. æŒ‰éˆ•æ¨£å¼ */
        .controls button {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.3rem; 
            cursor: pointer;
            padding: 3px 8px; 
        }
        
        /* 6. è§£æåº¦é¸æ“‡å™¨æ¨£å¼ */
        #resolutionSelect {
            /* æ–°å¢ï¼šå°‡è§£æåº¦èª¿æ•´é¸å–®æ”¾åœ¨æœ€å·¦é‚Š */
            margin-right: 15px; 
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            /* ç§»é™¤é è¨­å¤–è§€ä»¥é…åˆæš—è‰²ä¸»é¡Œ */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            min-width: 80px;
        }
        /* è¨­ç½®é¸å–®é¸é …çš„æ¨£å¼ (ä¾‹å¦‚èƒŒæ™¯é¡è‰²ï¼Œä½¿å…¶åœ¨ä¸‹æ‹‰æ™‚å¯è¦‹) */
        #resolutionSelect option {
            background-color: #333;
            color: #fff;
        }


        /* 7. é€²åº¦æ¢å®¹å™¨ */
        .progress-bar-container {
            flex-grow: 1; 
            margin: 0 15px;
            height: 6px; 
            background: #555;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }

        /* 8. å¯¦éš›é€²åº¦æ¢ */
        .progress-bar {
            height: 100%;
            width: 0%; 
            background: #f00;
            border-radius: 3px;
        }

        /* 9. æ™‚é–“é¡¯ç¤º */
        .time-display {
            font-size: 0.9rem; 
            margin-left: 10px;
            min-width: 80px; 
            text-align: right;
        }

        /* 10. éŸ³é‡æ»‘å¡Š */
        .volume-slider {
            width: 70px; 
            margin-left: 8px;
        }
    </style>
</head>
<body>

    <div class="video-player" id="videoPlayerContainer">
        <video id="myVideo" src="https://www.w3schools.com/html/mov_bbb.mp4" preload="metadata">
            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´ HTML5 å½±ç‰‡æ’­æ”¾ã€‚
        </video>

        <div class="controls">
            
            <select id="resolutionSelect">
                <option value="480p">480p</option>
                <option value="720p" selected>720p</option>
                <option value="1080p">1080p</option>
            </select>
            <button id="playPauseBtn">â–¶</button>

            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <span class="time-display" id="timeDisplay">0:00 / 0:00</span>

            <button id="muteUnmuteBtn">ğŸ”Š</button>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" class="volume-slider">
        </div>
    </div>

    <script>
        // ç²å–æ‰€æœ‰éœ€è¦çš„ DOM å…ƒç´ 
        const video = document.getElementById('myVideo');
        const videoPlayerContainer = document.getElementById('videoPlayerContainer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const progressBar = document.getElementById('progressBar');
        const progressContainer = document.querySelector('.progress-bar-container');
        const timeDisplay = document.getElementById('timeDisplay');
        const volumeSlider = document.getElementById('volumeSlider');
        const muteUnmuteBtn = document.getElementById('muteUnmuteBtn');
        // æ–°å¢è§£æåº¦é¸å–®
        const resolutionSelect = document.getElementById('resolutionSelect');

        // å®šç¾©ä¸åŒè§£æåº¦å°æ‡‰çš„å½±ç‰‡ä¾†æº URL (è«‹æ›¿æ›ç‚ºæ‚¨è‡ªå·±çš„å¯¦éš›å½±ç‰‡ URL)
        const videoSources = {
            '480p': 'https://www.w3schools.com/html/mov_bbb.mp4', // ç¯„ä¾‹ URL
            '720p': 'https://www.sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4', // ç¯„ä¾‹ URL
            '1080p': 'https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' // ç¯„ä¾‹ URL
        };
        
        // åˆå§‹åŒ–å½±ç‰‡ä¾†æºç‚º 720p (èˆ‡é¸å–®çš„ selected ä¸€è‡´)
        video.src = videoSources['720p'];


        // =========================================================
        // æ–°å¢åŠŸèƒ½ï¼šè§£æåº¦åˆ‡æ›é‚è¼¯
        // =========================================================
        resolutionSelect.addEventListener('change', (e) => {
            const newResolution = e.target.value;
            const newSource = videoSources[newResolution];
            
            if (newSource) {
                const wasPaused = video.paused;
                const currentTime = video.currentTime;
                
                // 1. è¨­ç½®æ–°çš„å½±ç‰‡ä¾†æº
                video.src = newSource;
                
                // 2. é‡æ–°è¼‰å…¥å½±ç‰‡
                video.load();
                
                // 3. å½±ç‰‡è¼‰å…¥ metadata å®Œæˆå¾Œï¼Œè·³è½‰åˆ°èˆŠçš„æ™‚é–“é»ä¸¦æ¢å¾©æ’­æ”¾ç‹€æ…‹
                video.onloadedmetadata = () => {
                    video.currentTime = currentTime;
                    if (!wasPaused) {
                        video.play();
                        playPauseBtn.textContent = 'â¸';
                    } else {
                        // ç¢ºä¿æš«åœæ™‚çš„åœ–ç¤ºæ­£ç¢º
                        playPauseBtn.textContent = 'â–¶';
                    }
                    video.onloadedmetadata = null; // æ¸…é™¤ event listener
                };
            }
        });
        // =========================================================
        
        // ç¦ç”¨æ»‘é¼ å³éµé¸å–®
        videoPlayerContainer.addEventListener('contextmenu', (e) => {
            e.preventDefault(); 
        });
        video.addEventListener('contextmenu', (e) => {
            e.preventDefault(); 
        });


        /**
         * å°‡ç§’æ•¸æ ¼å¼åŒ–ç‚º "åˆ†:ç§’" çš„å­—ä¸²
         */
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            const formattedSecs = secs < 10 ? '0' + secs : secs;
            return `${minutes}:${formattedSecs}`;
        }

        // --- 1. æ’­æ”¾/æš«åœåŠŸèƒ½ ---
        function togglePlayPause() {
            if (video.paused || video.ended) {
                video.play();
                playPauseBtn.textContent = 'â¸'; 
            } else {
                video.pause();
                playPauseBtn.textContent = 'â–¶'; 
            }
        }
        playPauseBtn.addEventListener('click', togglePlayPause);
        video.addEventListener('click', togglePlayPause);
        
        video.addEventListener('ended', () => {
            playPauseBtn.textContent = 'â–¶';
        });


        // --- 2. é€²åº¦æ¢æ›´æ–°èˆ‡è·³è½‰ ---
        
        // a) å½±ç‰‡æ’­æ”¾æ™‚ï¼ŒæŒçºŒæ›´æ–°é€²åº¦æ¢å’Œæ™‚é–“é¡¯ç¤º
        video.addEventListener('timeupdate', () => {
            const currentTime = video.currentTime;
            const duration = video.duration;

            if (isFinite(duration) && duration > 0) {
                const progress = (currentTime / duration) * 100;
                progressBar.style.width = `${progress}%`;
                
                const currentTimeFormatted = formatTime(currentTime);
                const durationFormatted = formatTime(duration);
                timeDisplay.textContent = `${currentTimeFormatted} / ${durationFormatted}`;
            } else {
                timeDisplay.textContent = `${formatTime(currentTime)} / 0:00`;
            }
        });
        
        // b) å½±ç‰‡è¼‰å…¥ metadata å®Œæˆæ™‚ï¼Œè¨­å®šç¸½æ™‚é•·
        video.addEventListener('loadedmetadata', () => {
            const durationFormatted = formatTime(video.duration);
            timeDisplay.textContent = `0:00 / ${durationFormatted}`;
        });
        

        // c) é»æ“Šé€²åº¦æ¢æ™‚ï¼Œè·³è½‰åˆ°æŒ‡å®šä½ç½®
        progressContainer.addEventListener('click', (e) => {
            const duration = video.duration;
            if (!isFinite(duration) || duration === 0) return; 

            const rect = progressContainer.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const percentage = clickX / rect.width;

            video.currentTime = duration * percentage;
        });


        // --- 3. éŸ³é‡æ§åˆ¶ ---

        // a) éŸ³é‡æ»‘å¡Šè®Šå‹•
        volumeSlider.addEventListener('input', () => {
            const volume = parseFloat(volumeSlider.value);
            video.volume = volume;
            if (volume === 0) {
                muteUnmuteBtn.textContent = 'ğŸ”‡';
            } else if (volume < 0.5) {
                muteUnmuteBtn.textContent = 'ğŸ”‰';
            } else {
                muteUnmuteBtn.textContent = 'ğŸ”Š';
            }
        });

        // b) éœéŸ³/è§£é™¤éœéŸ³æŒ‰éˆ•
        let lastVolume = 1; 

        muteUnmuteBtn.addEventListener('click', () => {
            if (video.volume > 0) {
                lastVolume = video.volume; 
                video.volume = 0;
                volumeSlider.value = 0;
                muteUnmuteBtn.textContent = 'ğŸ”‡';
            } else {
                video.volume = lastVolume; 
                volumeSlider.value = lastVolume;
                if (lastVolume < 0.5) {
                    muteUnmuteBtn.textContent = 'ğŸ”‰';
                } else {
                    muteUnmuteBtn.textContent = 'ğŸ”Š';
                }
            }
        });

    </script>

</body>
</html>
